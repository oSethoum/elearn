datasource db {
	url = env("DATABASE_URL")
	provider = "sqlite"
}

generator client {
	provider = "prisma-client-js"
}

generator typegraphql {
	provider = "typegraphql-prisma"
	output   = "../prisma/generated/type-graphql"
}

model User {
	id Int @id @default(autoincrement())
	username String 
	email String 
	/// @TypeGraphQL.omit(output: true)
	password String 
	role String 
	disabled Boolean 
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	teacher Teacher?
	admin Admin?
	student Student?
}

model Student {
	id Int @id @default(autoincrement())
	grade Int 
	firstName String 
	lastName String 
	user User @relation(fields:[userId], references:[id])
	userId Int
	submissions Submission[]
	topic Topic? @relation(fields:[topicId], references:[id])
	topicId Int?
}

model Teacher {
	id Int @id @default(autoincrement())
	firstName String 
	lastName String 
	user User @relation(fields:[userId], references:[id])
	userId Int
	courses Course[]
}

model Admin {
	id Int @id @default(autoincrement())
	lastName String 
	firstName String 
	user User @relation(fields:[userId], references:[id])
	userId Int
}

model Department {
	id Int @id @default(autoincrement())
	name String 
	topics Topic[]
}

model Topic {
	id Int @id @default(autoincrement())
	name String 
	grades Int 
	department Department? @relation(fields:[departmentId], references:[id])
	departmentId Int?
	courses Course[]
	students Student[]
}

model Course {
	id Int @id @default(autoincrement())
	title String 
	grade Int 
	description String? 
	published Boolean @default(false)
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	topic Topic? @relation(fields:[topicId], references:[id])
	topicId Int?
	assignments Assignment[]
	teacher Teacher? @relation(fields:[teacherId], references:[id])
	teacherId Int?
	meetings Meeting[]
	lessons Lesson[]
}

model Assignment {
	id Int @id @default(autoincrement())
	title String 
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	published Boolean 
	content String 
	description String? 
	course Course? @relation(fields:[courseId], references:[id])
	courseId Int?
	submissions Submission[]
	assignmentFiles AssignmentFile[]
}

model Meeting {
	id Int @id @default(autoincrement())
	title String 
	description String? 
	date DateTime 
	startTime DateTime 
	duration DateTime 
	link String? 
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	course Course? @relation(fields:[courseId], references:[id])
	courseId Int?
}

model Submission {
	id Int @id @default(autoincrement())
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	content String 
	student Student? @relation(fields:[studentId], references:[id])
	studentId Int?
	assignment Assignment? @relation(fields:[assignmentId], references:[id])
	assignmentId Int?
	submissionFiles SubmissionFile[]
}

model AssignmentFile {
	id Int @id @default(autoincrement())
	link String 
	type String 
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	name String 
	assignment Assignment? @relation(fields:[assignmentId], references:[id])
	assignmentId Int?
}

model Lesson {
	id Int @id @default(autoincrement())
	title String 
	description String? 
	published Boolean 
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	content String 
	lessonFiles LessonFile[]
	course Course? @relation(fields:[courseId], references:[id])
	courseId Int?
}

model LessonFile {
	id Int @id @default(autoincrement())
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	type String 
	name String 
	link String 
	lesson Lesson? @relation(fields:[lessonId], references:[id])
	lessonId Int?
}

model SubmissionFile {
	id Int @id @default(autoincrement())
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	link String 
	name String 
	type String 
	submission Submission? @relation(fields:[submissionId], references:[id])
	submissionId Int?
}
