import{a8 as Fe,t as Ne,d as C,au as Be,h as A,j as u,k as V,ax as Y,av as je,B as U,aw as pe,E as J,ay as xe,a9 as l,a5 as Ae,r as ze,F as Se}from"./vendor.0be45842.js";import{u as qe,L as be}from"./index.388e8e0a.js";import{d as Ke}from"./schema.bcb88cc1.js";function De({course:{id:e,description:t,title:n,teacher:r,_count:a,topic:s,year:v},canEdit:h,canDelete:b}){const{colors:d,colorScheme:$}=Fe(),{t:x}=Ne();return C(Be,{shadow:"xs",p:0,children:[C(A,{position:"apart",pr:10,sx:{backgroundColor:$==="dark"?d.dark[5]:d.gray[2]},children:[u(V,{p:10,weight:"bold",size:"lg",children:n}),u(Y,{size:"lg",children:(s==null?void 0:s.name)+" "+v})]}),u(je,{}),C(U,{p:10,sx:{minHeight:50},children:[C(V,{children:[" ",t||x("noDescription")," "]}),C(A,{align:"flex-end",mt:20,position:"apart",children:[u(V,{children:r&&(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)||x("noAuthor")}),C(A,{children:[u(pe,{label:x("lessons"),children:u(Y,{color:"red",size:"lg",children:a==null?void 0:a.lessons})}),u(pe,{label:x("assignments"),children:u(Y,{color:"green",size:"lg",children:a==null?void 0:a.assignments})})]}),C(A,{children:[!!b&&u(J,{color:"red",children:x("delete")}),!!h&&u(xe,{tabIndex:-1,to:`/courses/${e}`,children:u(J,{color:"green",children:x("edit")})}),u(xe,{tabIndex:-1,to:`/courses/${e}`,children:u(J,{children:x("view")})})]})]})]})]})}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function Pe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var He=["bottom","height","left","right","top","width"],We=function(t,n){return t===void 0&&(t={}),n===void 0&&(n={}),He.some(function(r){return t[r]!==n[r]})},R=new Map,ye,Ge=function e(){var t=[];R.forEach(function(n,r){var a=r.getBoundingClientRect();We(a,n.rect)&&(n.rect=a,t.push(n))}),t.forEach(function(n){n.callbacks.forEach(function(r){return r(n.rect)})}),ye=window.requestAnimationFrame(e)};function Qe(e,t){return{observe:function(){var r=R.size===0;R.has(e)?R.get(e).callbacks.push(t):R.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&Ge()},unobserve:function(){var r=R.get(e);if(r){var a=r.callbacks.indexOf(t);a>=0&&r.callbacks.splice(a,1),r.callbacks.length||R.delete(e),R.size||cancelAnimationFrame(ye)}}}}var q=typeof window!="undefined"?l.useLayoutEffect:l.useEffect;function Ve(e,t){t===void 0&&(t={width:0,height:0});var n=l.useState(e.current),r=n[0],a=n[1],s=l.useReducer(Ye,t),v=s[0],h=s[1],b=l.useRef(!1);return q(function(){e.current!==r&&a(e.current)}),q(function(){if(r&&!b.current){b.current=!0;var d=r.getBoundingClientRect();h({rect:d})}},[r]),l.useEffect(function(){if(!!r){var d=Qe(r,function($){h({rect:$})});return d.observe(),function(){d.unobserve()}}},[r]),v}function Ye(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e}var Je=function(){return 50},Ue=function(t){return t},Xe=function(t,n){var r=n?"offsetWidth":"offsetHeight";return t[r]},Ze=function(t){for(var n=Math.max(t.start-t.overscan,0),r=Math.min(t.end+t.overscan,t.size-1),a=[],s=n;s<=r;s++)a.push(s);return a};function _e(e){var t,n=e.size,r=n===void 0?0:n,a=e.estimateSize,s=a===void 0?Je:a,v=e.overscan,h=v===void 0?1:v,b=e.paddingStart,d=b===void 0?0:b,$=e.paddingEnd,x=$===void 0?0:$,I=e.parentRef,T=e.horizontal,k=e.scrollToFn,Re=e.useObserver,Ee=e.initialRect,X=e.onScrollElement,Z=e.scrollOffsetFn,_=e.keyExtractor,ee=_===void 0?Ue:_,re=e.measureSize,te=re===void 0?Xe:re,ne=e.rangeExtractor,ae=ne===void 0?Ze:ne,Ce=T?"width":"height",F=T?"scrollLeft":"scrollTop",z=l.useRef({scrollOffset:0,measurements:[]}),se=l.useState(0),Oe=se[0],ie=se[1];z.current.scrollOffset=Oe;var $e=Re||Ve,ke=$e(I,Ee),we=ke[Ce];z.current.outerSize=we;var M=l.useCallback(function(i){I.current&&(I.current[F]=i)},[I,F]),oe=k||M;k=l.useCallback(function(i){oe(i,M)},[M,oe]);var ue=l.useState({}),le=ue[0],K=ue[1],Ie=l.useCallback(function(){return K({})},[]),N=l.useRef([]),w=l.useMemo(function(){var i=N.current.length>0?Math.min.apply(Math,N.current):0;N.current=[];for(var f=z.current.measurements.slice(0,i),o=i;o<r;o++){var m=ee(o),c=le[m],S=f[o-1]?f[o-1].end:d,g=typeof c=="number"?c:s(o),p=S+g;f[o]={index:o,start:S,size:g,end:p,key:m}}return f},[s,le,d,r,ee]),ce=(((t=w[r-1])==null?void 0:t.end)||d)+x;z.current.measurements=w,z.current.totalSize=ce;var L=X?X.current:I.current,D=l.useRef(Z);D.current=Z,q(function(){if(!L){ie(0);return}var i=function(o){var m=D.current?D.current(o):L[F];ie(m)};return i(),L.addEventListener("scroll",i,{capture:!1,passive:!0}),function(){L.removeEventListener("scroll",i)}},[L,F]);var fe=rr(z.current),de=fe.start,ve=fe.end,P=l.useMemo(function(){return ae({start:de,end:ve,overscan:h,size:w.length})},[de,ve,h,w.length,ae]),he=l.useRef(te);he.current=te;var Me=l.useMemo(function(){for(var i=[],f=function(S,g){var p=P[S],B=w[p],E=O(O({},B),{},{measureRef:function(j){if(j){var G=he.current(j,T);if(G!==E.size){var ge=z.current.scrollOffset;E.start<ge&&M(ge+(G-E.size)),N.current.push(p),K(function(Te){var Q;return O(O({},Te),{},(Q={},Q[E.key]=G,Q))})}}}});i.push(E)},o=0,m=P.length;o<m;o++)f(o);return i},[P,M,T,w]),me=l.useRef(!1);q(function(){me.current&&K({}),me.current=!0},[s]);var H=l.useCallback(function(i,f){var o=f===void 0?{}:f,m=o.align,c=m===void 0?"start":m,S=z.current,g=S.scrollOffset,p=S.outerSize;c==="auto"&&(i<=g?c="start":i>=g+p?c="end":c="start"),c==="start"?k(i):c==="end"?k(i-p):c==="center"&&k(i-p/2)},[k]),W=l.useCallback(function(i,f){var o=f===void 0?{}:f,m=o.align,c=m===void 0?"auto":m,S=Pe(o,["align"]),g=z.current,p=g.measurements,B=g.scrollOffset,E=g.outerSize,y=p[Math.max(0,Math.min(i,r-1))];if(!!y){if(c==="auto")if(y.end>=B+E)c="end";else if(y.start<=B)c="start";else return;var j=c==="center"?y.start+y.size/2:c==="end"?y.end:y.start;H(j,O({align:c},S))}},[H,r]),Le=l.useCallback(function(){for(var i=arguments.length,f=new Array(i),o=0;o<i;o++)f[o]=arguments[o];W.apply(void 0,f),requestAnimationFrame(function(){W.apply(void 0,f)})},[W]);return{virtualItems:Me,totalSize:ce,scrollToOffset:H,scrollToIndex:Le,measure:Ie}}var er=function(t,n,r,a){for(;t<=n;){var s=(t+n)/2|0,v=r(s);if(v<a)t=s+1;else if(v>a)n=s-1;else return s}return t>0?t-1:0};function rr(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,a=t.length-1,s=function(d){return t[d].start},v=er(0,a,s,r),h=v;h<a&&t[h].end<r+n;)h++;return{start:v,end:h}}const tr=({courses:e})=>{const t=ze.exports.useRef(null),n=_e({size:e.length,parentRef:t,estimateSize:ze.exports.useCallback(()=>170,[])});return u(Se,{children:u(U,{ref:t,className:"List",style:{display:"flex",height:"90vh",width:"100%",overflow:"auto"},children:u(U,{className:"ListInner",style:{height:`${n.totalSize}px`,width:"99.5%",position:"relative"},children:n.virtualItems.map(r=>u("div",{className:r.index%2?"ListItemOdd":"ListItemEven",style:{position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`},children:u(Se,{children:u(De,{course:e[r.index]})})},r.index))})})})},ir=()=>{var r,a,s;const{user:e}=qe(),{loading:t,data:n}=Ke({variables:{where:e!=null&&e.student?{AND:[{topicId:{equals:(r=e==null?void 0:e.student)==null?void 0:r.topicId}},{year:{equals:(a=e==null?void 0:e.student)==null?void 0:a.year}}]}:e!=null&&e.teacher?{teacherId:{equals:(s=e==null?void 0:e.teacher)==null?void 0:s.id}}:{}}});return n?u(Ae,{my:20,size:"xl",sx:{display:"flex",gap:15,flexDirection:"column"},children:t?u(be,{height:"80vh"}):u(tr,{courses:n.courses})}):u(be,{height:"80vh"})};export{ir as CourseList,ir as default};
