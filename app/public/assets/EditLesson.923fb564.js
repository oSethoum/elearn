var v=Object.defineProperty,L=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var x=(r,e,t)=>e in r?v(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,c=(r,e)=>{for(var t in e||(e={}))z.call(e,t)&&x(r,t,e[t]);if(b)for(var t of b(e))C.call(e,t)&&x(r,t,e[t]);return r},f=(r,e)=>L(r,S(e));import{v as l,w as T,a4 as j,r as E,a3 as k,t as N,K as R,j as s,a5 as V,d as a,Y as q,k as p,a6 as B,h as I,x as D,D as F,ba as G,E as w,z as H}from"./vendor.0be45842.js";import{L as K}from"./index.388e8e0a.js";import{x as M,r as Q}from"./schema.bcb88cc1.js";import{R as U}from"./RichTextEditor.64790426.js";const W=()=>{const r=l.object({title:l.string().nonempty(),description:l.string().nonempty(),content:l.string().min(20)}),e=T({schema:H(r),initialValues:{title:"",description:"",published:!1,content:""}}),t=j(),[P]=M(),{loading:d,data:o}=Q({variables:{where:{id:parseInt(t.lessonId)}}});E.exports.useEffect(()=>{var n,h,m,g;e.setValues({content:(n=o==null?void 0:o.lesson)==null?void 0:n.content,description:(h=o==null?void 0:o.lesson)==null?void 0:h.description,published:(m=o==null?void 0:o.lesson)==null?void 0:m.published,title:(g=o==null?void 0:o.lesson)==null?void 0:g.title})},[d]);const u=k(),{t:i}=N(),{showNotification:y}=R();return d?s(K,{height:"80vh"}):s(V,{my:20,size:"xl",children:a(q,{withBorder:!0,p:20,children:[s(p,{weight:"bold",sx:{fontSize:22},children:i("editLesson")}),s(B,{h:15}),s("form",{onSubmit:e.onSubmit(n=>{P({variables:{where:{id:parseInt(t.lessonId)},data:{title:{set:n.title},content:{set:n.content},description:{set:n.description},published:{set:n.published}}},onCompleted(){y({message:i("success"),color:"green"}),u("/courses/"+t.courseId+"?tab=lessons")}})}),noValidate:!0,children:a(I,{grow:!0,spacing:"lg",direction:"column",children:[s(D,f(c({label:i("title"),placeholder:i("title")},e.getInputProps("title")),{required:!0})),s(F,c({label:i("description"),placeholder:i("description")},e.getInputProps("description"))),s(G,c({label:i("published")},e.getInputProps("published",{type:"checkbox"}))),s(p,{sx:{fontSize:14},mb:-15,weight:500,children:i("Content")}),s(U,c({required:!0,sx:n=>({minHeight:250,border:e.getInputProps("content").error?`1px solid ${n.colors.red[6]}`:void 0,color:e.getInputProps("content").error?n.colors.red[6]:void 0})},e.getInputProps("content"))),e.getInputProps("content").error&&s(p,{mt:-15,sx:n=>({fontSize:14,color:n.colors.red[6]}),children:e.getInputProps("content").error}),a(I,{position:"right",children:[s(w,{variant:"outline",onClick:()=>{u(-1)},sx:{width:100},color:"gray",children:"Cancel"}),s(w,{type:"submit",color:"green",sx:{width:100},children:i("apply")})]})]})})]})})};export{W as EditLesson,W as default};
