import{t as k,a3 as v,d as o,au as T,j as e,B as d,k as g,av as f,a6 as B,h as a,E as h,a1 as _,aw as q,ax as O,ay as R,J as W,a4 as X,r as G,a5 as ee,Y as J,az as x,aA as re,F as w,m as y,Z as z,aB as ne,aC as ie}from"./vendor.0be45842.js";import{u as U,L as oe}from"./index.388e8e0a.js";import{d as M}from"./ar-dz.71d281d7.js";import{m as le,o as ce,p as te,q as se,n as D}from"./schema.bcb88cc1.js";import{u as ae}from"./use-url-query.77f4c0fe.js";const de=_(n=>({title:{backgroundColor:n.colorScheme==="dark"?n.colors.dark[5]:n.colors.gray[2]}})),he=({assignment:n,canEdit:u,canDelete:s,onDelete:p})=>{const{classes:i}=de(),{t:r}=k(),c=v(),b=()=>p(),m=()=>{c(`assignments/${n.id}/edit`)},C=()=>{c(`assignments/${n.id}`)};return o(T,{p:0,m:10,shadow:"xs",children:[e(d,{className:i.title,p:10,children:e(g,{size:"xl",weight:"bold",children:n.title})}),e(f,{}),o(d,{m:10,children:[e(d,{children:n.description||r("noDescription")}),e(B,{h:15}),e(a,{position:"right",children:o(a,{children:[!!s&&e(h,{color:"red",variant:"light",onClick:b,children:r("delete")}),!!u&&e(h,{color:"green",variant:"light",onClick:m,children:r("edit")}),e(h,{color:"blue",onClick:C,children:r("view")})]})})]})]})},me=_(n=>({title:{backgroundColor:n.colorScheme==="dark"?n.colors.dark[5]:n.colors.gray[2]}})),ge=({lesson:n,canEdit:u,canDelete:s,onDelete:p})=>{const{classes:i}=me(),{t:r}=k(),c=v(),b=()=>p(),m=()=>{c(`lessons/${n.id}/edit`)},C=()=>{c(`lessons/${n.id}`)};return o(T,{shadow:"xs",m:10,p:0,children:[e(d,{className:i.title,p:10,children:e(g,{size:"xl",weight:"bold",children:n.title})}),e(f,{}),o(d,{m:10,children:[e(d,{children:n.description||r("noDescription")}),e(B,{h:15}),e(a,{position:"right",children:o(a,{children:[!!s&&e(h,{color:"red",variant:"light",onClick:b,children:r("delete")}),!!u&&e(h,{color:"green",variant:"light",onClick:m,children:r("edit")}),e(h,{color:"blue",onClick:C,children:r("view")})]})})]})]})},pe=_(n=>({title:{backgroundColor:n.colorScheme==="dark"?n.colors.dark[5]:n.colors.gray[2]}})),ue=({meeting:n,canEdit:u,canDelete:s,onDelete:p})=>{const{classes:i}=pe(),{t:r}=k(),{language:c}=U(),b=v(),m=()=>p(),C=()=>{b(`meetings/${n.id}/edit`)};return o(T,{m:10,p:0,shadow:"xs",children:[e(d,{className:i.title,p:10,children:e(g,{size:"xl",weight:"bold",children:n.title})}),e(f,{}),o(d,{m:10,children:[e(d,{children:n.description||r("noDescription")}),e(B,{h:15}),o(a,{position:"apart",children:[e(q,{label:r("date"),children:o(O,{size:"lg",color:"green",children:[M(n.date).locale(c=="ar"?"ar-dz":c).format("DD-MMMM-YYYY"),"  ",M(n.startTime).locale(c=="ar"?"ar-dz":c).format("HH:mm")]})}),e(q,{label:r("duration"),children:e(O,{size:"lg",children:M(n.duration).locale(c=="ar"?"ar-dz":c).format("HH:mm")})}),o(a,{children:[!!s&&e(h,{color:"red",variant:"light",onClick:m,children:r("delete")}),!!u&&e(h,{color:"green",variant:"light",onClick:C,children:r("edit")}),e(R,{target:"_blank",to:n.link,children:e(h,{color:"blue",children:r("join")})})]})]})]})]})},ve=()=>{var $,A,Q,H,S,E,F,L,j,P,Y,I,N;const n=W(),[u]=le(),s=X(),p=ae(),{t:i}=k(),{user:r}=U(),c=v(),[b,m]=G.exports.useState(0),[C]=ce(),[V]=te(),{loading:Z,data:l}=se({variables:{where:{id:parseInt(s==null?void 0:s.courseId)}}});if(G.exports.useEffect(()=>{p.get("tab")==="assignments"?m(1):p.get("tab")==="meetings"?m(2):m(0)},[p]),Z)return e(oe,{height:"80vh"});const K=t=>{m(t),c(`/courses/${s==null?void 0:s.courseId}/${t===0?"?tab=lessons":t===1?"?tab=assignments":"?tab=meetings"}`)};return o(ee,{size:"xl",children:[e(J,{shadow:"xs",withBorder:!0,p:10,my:20,children:e(g,{align:"center",size:"xl",weight:"bold",children:($=l==null?void 0:l.course)==null?void 0:$.title})}),e(J,{shadow:"xs",withBorder:!0,children:o(x,{onTabChange:K,active:b,grow:!0,children:[e(x.Tab,{icon:e(re,{}),label:i("lessons"),color:"red",children:o(d,{sx:{minHeight:"80vh"},children:[(r==null?void 0:r.role)==="teacher"&&o(w,{children:[e(a,{mx:10,mb:10,position:"apart",children:e(h,{onClick:()=>{c("lessons/new")},children:i("add")})}),e(f,{})]}),((Q=(A=l==null?void 0:l.course)==null?void 0:A.lessons)==null?void 0:Q.length)==0?e(y,{sx:{height:"80vh"},children:o(a,{direction:"column",children:[e(z,{size:36}),e(g,{children:i("empty")})]})}):(S=(H=l==null?void 0:l.course)==null?void 0:H.lessons)==null?void 0:S.map(t=>(t.published||(r==null?void 0:r.role)!="teacher")&&e(ge,{lesson:t,canEdit:(r==null?void 0:r.role)==="teacher",canDelete:(r==null?void 0:r.role)==="teacher",onDelete:()=>{n.openConfirmModal({title:i("confirmAction"),children:e(g,{size:"sm",children:i("deleteMessage")}),labels:{confirm:i("confirm"),cancel:i("cancel")},confirmProps:{color:"red"},centered:!0,onConfirm:()=>u({variables:{where:{id:t.id}},refetchQueries:[D.Query.Course]})})}},t.title))]})}),e(x.Tab,{icon:e(ne,{}),label:i("assignments"),color:"green",children:o(d,{sx:{minHeight:"80vh"},children:[(r==null?void 0:r.role)==="teacher"&&o(w,{children:[e(a,{mx:10,mb:10,position:"apart",children:e(h,{onClick:()=>{c("assignments/new")},children:i("add")})}),e(f,{})]}),((F=(E=l==null?void 0:l.course)==null?void 0:E.assignments)==null?void 0:F.length)==0?e(y,{sx:{height:"80vh"},children:o(a,{direction:"column",children:[e(z,{size:36}),e(g,{children:i("empty")})]})}):(j=(L=l==null?void 0:l.course)==null?void 0:L.assignments)==null?void 0:j.map(t=>(t.published||(r==null?void 0:r.role)!="teacher")&&e(he,{onDelete:()=>{n.openConfirmModal({title:i("confirmAction"),children:e(g,{size:"sm",children:i("deleteMessage")}),labels:{confirm:i("confirm"),cancel:i("cancel")},confirmProps:{color:"red"},centered:!0,onConfirm:()=>C({variables:{where:{id:t.id}},refetchQueries:[D.Query.Course]})})},assignment:t,canEdit:(r==null?void 0:r.role)==="teacher",canDelete:(r==null?void 0:r.role)==="teacher"},t.id))]})}),e(x.Tab,{icon:e(ie,{}),label:i("videoConferences"),color:"blue",children:o(d,{sx:{minHeight:"80vh"},children:[(r==null?void 0:r.role)==="teacher"&&o(w,{children:[e(a,{mx:10,mb:10,position:"apart",children:e(h,{onClick:()=>{c("meetings/new")},children:i("add")})}),e(f,{})]}),((Y=(P=l==null?void 0:l.course)==null?void 0:P.meetings)==null?void 0:Y.length)==0?e(y,{sx:{height:"80vh"},children:o(a,{direction:"column",children:[e(z,{size:36}),e(g,{children:i("empty")})]})}):(N=(I=l==null?void 0:l.course)==null?void 0:I.meetings)==null?void 0:N.map(t=>e(ue,{meeting:t,onDelete:()=>{n.openConfirmModal({title:i("confirmAction"),children:e(g,{size:"sm",children:i("deleteMessage")}),labels:{confirm:i("confirm"),cancel:i("cancel")},confirmProps:{color:"red"},centered:!0,onConfirm:()=>V({variables:{where:{id:t.id}},refetchQueries:[D.Query.Course]})})},canEdit:(r==null?void 0:r.role)==="teacher",canDelete:(r==null?void 0:r.role)==="teacher"},t.id))]})})]})})]})};export{ve as CourseContent,ve as default};
