var V=Object.defineProperty,z=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var b=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e)=>{for(var n in e||(e={}))G.call(e,n)&&b(t,n,e[n]);if(y)for(var n of y(e))L.call(e,n)&&b(t,n,e[n]);return t},v=(t,e)=>z(t,A(e));import{F as N,n as f,G as P,f as q,H as F}from"./schema.bcb88cc1.js";import{t as D,r as g,v as m,w,z as E,j as a,B as M,d as l,x as j,h as C,E as d,J as H,K as O,O as Q,Q as T,U}from"./vendor.0be45842.js";import{u as J,L as K}from"./index.388e8e0a.js";import{D as R}from"./DataGrid.9dd6d65b.js";const _=({onCancel:t,onSubmit:e,department:n})=>{const{t:o}=D(),[r]=N(),c=g.exports.useMemo(()=>m.object({name:m.string().nonempty("nonEmpty")}),[]),i=w({schema:E(c),initialValues:{name:n.name}});return a(M,{children:l("form",{onSubmit:i.onSubmit(p=>{r({variables:{where:{id:n.id},data:{name:{set:p.name}}},refetchQueries:[f.Query.Departments],onCompleted(){e==null||e()}})}),noValidate:!0,children:[a(j,v(h({label:o("name"),placeholder:o("name")},i.getInputProps("name")),{required:!0})),l(C,{position:"right",mt:"lg",children:[a(d,{variant:"default",onClick:t,children:o("cancel")}),a(d,{color:"green",type:"submit",children:o("apply")})]})]})})},W=({onCancel:t,onSubmit:e})=>{const{t:n}=D(),[o]=P(),r=g.exports.useMemo(()=>m.object({name:m.string().nonempty("nonEmpty")}),[]),c=w({schema:E(r),initialValues:{name:""}});return a(M,{children:l("form",{onSubmit:c.onSubmit(i=>{o({variables:{data:{name:i.name}},refetchQueries:[f.Query.Departments],onCompleted(){e==null||e()}})}),noValidate:!0,children:[a(j,h({label:n("name"),placeholder:n("name"),required:!0},c.getInputProps("name"))),l(C,{position:"right",mt:10,children:[a(d,{variant:"default",onClick:t,children:n("cancel")}),a(d,{type:"submit",children:n("add")})]})]})})},ee=()=>{const{data:t}=q(),{t:e}=D(),[n]=F(),{openModal:o,closeModal:r,openConfirmModal:c}=H(),{showNotification:i}=O(),{setHeader:p}=J();if(g.exports.useEffect(()=>{p("departments")},[]),!t)return a(K,{height:"80vh"});const k=()=>{const s=o({title:e("addDepartment"),children:a(W,{onCancel:()=>r(s),onSubmit:()=>{r(s),i({message:e("success"),color:"green"})}})})},B=s=>{c({title:e("confirmAction"),children:e("deleteMessage"),labels:{confirm:e("confirm"),cancel:e("cancel")},confirmProps:{color:"red"},centered:!0,withCloseButton:!1,onConfirm:()=>{n({variables:{where:{id:t.departments[s].id}},refetchQueries:[f.Query.Departments],onCompleted(){i({message:e("success"),color:"green"})}})}})},I=s=>{const u=o({title:e("editDepartment"),size:"xl",children:a(_,{department:t.departments[s],onCancel:()=>r(u),onSubmit:()=>{r(u),i({message:e("success"),color:"green"})}})})};return l(M,{sx:{height:"100%"},m:10,children:[a(d,{mb:20,onClick:k,children:e("add")}),a(R,{headerModifier:e,data:t==null?void 0:t.departments.map((s,u)=>{var x;return{id:s.id,name:s.name,topics:(x=s._count)==null?void 0:x.topics}}),actionsLabel:"actions",actions:s=>l(C,{children:[a(Q,{onClick:()=>I(s),color:"green",children:a(T,{})}),a(Q,{onClick:()=>B(s),color:"red",children:a(U,{})})]})})]})};export{ee as Departments,ee as default};
